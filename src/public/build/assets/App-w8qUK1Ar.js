var d=Object.defineProperty;var h=(n,e,t)=>e in n?d(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var a=(n,e,t)=>(h(n,typeof e!="symbol"?e+"":e,t),t);class u{constructor(e,t,s){this._path=e,this._headers=t,this._onCompleteCallback=s}get(){let e=new XMLHttpRequest;e.overrideMimeType&&e.overrideMimeType("application/json"),e.addEventListener("readystatechange",t=>this.onWebRequestLoaded(t)),e.open("GET",this._path,!0),this.addHeaders(e),e.send(null)}post(e){let t=new XMLHttpRequest;t.overrideMimeType&&t.overrideMimeType("application/json"),t.addEventListener("readystatechange",s=>this.onWebRequestLoaded(s)),t.open("POST",this._path,!0),this.addHeaders(t),t.send(e)}addHeaders(e){for(let t in this._headers)e.setRequestHeader(t,this._headers[t])}onWebRequestLoaded(e){let t=e.target;if(t.readyState==4)if(t.status==200||t.status==0)try{this.onComplete(t.responseText,null)}catch(s){console.log(s),this.onComplete(null,{errorCode:-1,errorMessage:"Error parsing request"})}else this.onComplete(null,{errorMessage:t.responseText,errorCode:t.status})}onComplete(e,t){this._onCompleteCallback(e,t)}}class p{constructor(e,t,s){a(this,"_parser");this._parser=new u(e,t,s.bind(this))}get(){this._parser.get()}post(e){this._parser.post(e)}}class m{constructor(e){this.onComplete=e}get(){this.webRequest=new p("/api/twitch/streams/count",null,this.onRequestComplete.bind(this)),this.webRequest.get()}onRequestComplete(e,t){if(t!=null){console.log("Error fetching streams");return}this.onComplete(JSON.parse(e))}}class c{constructor(){if(new m(this.onComplete.bind(this)).get(),window.URLSearchParams!=null){const s=new URLSearchParams(window.location.search).get("game_id");this.markActive(s)}}markActive(e){let t=document.getElementById("game-id-"+e);t&&t.classList.add("active")}onComplete(e){for(let t in e){let s=document.getElementById("game-id-"+t);if(s==null)continue;let o=s.querySelector("span"),i=e[t].length;o.innerText=i,i>0&&s.classList.add("live")}}}new c;class v{constructor(e){a(this,"lastScrollTopPosition",-1);this.nav=e,this.lastScrollTopPosition=window.pageYOffset||document.documentElement.scrollTop,window.addEventListener("scroll",this.onWindowScrolled.bind(this),!1),this.onWindowScrolled()}onWindowScrolled(){let e=window.pageYOffset||document.documentElement.scrollTop;this.nav.classList.contains("nav-open")||(e>this.lastScrollTopPosition?this.nav.setAttribute("hidden","true"):e<this.lastScrollTopPosition&&this.nav.setAttribute("hidden","false"),e===0?this.nav.setAttribute("isAtTopOfThePage","true"):this.nav.setAttribute("isAtTopOfThePage","false"),this.lastScrollTopPosition=e<=0?0:e)}}class g{constructor(e){a(this,"navToggleBtn");this.nav=e,this.navToggleBtn=document.getElementById("mobileMenuToggle"),this.navToggleBtn.addEventListener("click",this.onNavToggled.bind(this),!1)}onNavToggled(){this.navToggleBtn.classList.toggle("is-active"),this.nav.classList.toggle("nav-open"),document.body.classList.toggle("nav-open")}}class w{constructor(){a(this,"cachedNavItem",null);var e=document.getElementById("nav");let t=document.querySelectorAll(".nav-item-dropdown");for(let s=0;s<t.length;s++){const o=t[s],i=o.querySelector(".nav-link"),l=o.querySelector(".dropdown-container");i.addEventListener("click",r=>this.onNavItemMouseClicked(r,o),!1),i.addEventListener("touchstart",r=>this.onNavItemMouseClicked(r,o),!0),l!=null&&l.addEventListener("mouseenter",this.onNavDropDownMouseEnter.bind(this,o),!1)}new v(e),new g(e)}onNavItemMouseClicked(e,t){if(e.preventDefault(),this.dropdownOpen==!0){this.closeDropDown(this.cachedNavItem);return}this.handleDropdownMenu(t)}handleDropdownMenu(e){this.cachedNavItem=e,e.querySelector(".nav-dropdown-contents")==null&&this.closeDropDown(e),e.classList.contains("open")!==!0&&this.openDropDown(e)}onNavDropDownMouseEnter(e){e.addEventListener("mouseleave",()=>this.closeDropDown(e),!1)}closeDropDown(e){e.classList.remove("open"),e.classList.add("close"),this.cachedNavItem=null}openDropDown(e){e.classList.add("open"),e.classList.remove("close")}get dropdownOpen(){return this.cachedNavItem==null?!1:this.cachedNavItem.classList.contains("open")}}new w;new c;
